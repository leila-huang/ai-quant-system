# AI量化系统 Redis开发环境配置
# 基于生产配置的开发环境优化

# 基础配置
bind 0.0.0.0
port 6379
timeout 0
tcp-keepalive 300

# 开发环境持久化配置（禁用RDB，避免解析与磁盘写入问题）
save ""

stop-writes-on-bgsave-error no
rdbcompression yes
rdbchecksum yes
dbfilename dump-dev.rdb
dir /data

# 关闭AOF，简化开发环境
appendonly no

# 内存管理（开发环境）
maxmemory 256mb
maxmemory-policy allkeys-lru
maxmemory-samples 3

# 网络配置
tcp-backlog 128
databases 16

# 开发环境安全配置（较宽松）
# 开发环境不设置密码，方便调试
# requirepass ""

# 日志配置（开发环境详细日志）
loglevel debug
logfile ""
syslog-enabled no

# 慢查询日志
slowlog-log-slower-than 1000
slowlog-max-len 256

# 客户端配置
maxclients 1000

# 数据结构阈值（Redis 7已更名为 listpack 参数，开发环境默认即可）
# hash-max-ziplist-entries 64
# hash-max-ziplist-value 32
# list-max-ziplist-size -1
# list-compress-depth 0
# set-max-intset-entries 64
# zset-max-ziplist-entries 64
# zset-max-ziplist-value 32

# 惰性删除（如需可启用）
# lazyfree-lazy-eviction yes
# lazyfree-lazy-expire yes
# lazyfree-lazy-server-del yes
# replica-lazy-flush yes
# lazyfree-lazy-user-del yes

# 通知配置（开发环境启用所有事件）
notify-keyspace-events "AKE"
